{"ast":null,"code":"var _staticBlock;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nexport class AppearanceService {\n  constructor(apiService, rendererFactory) {\n    this.apiService = apiService;\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n  applySettings() {\n    this.apiService.getNastavitve().subscribe({\n      next: settings => {\n        settings.forEach(setting => {\n          this.applySetting(setting.key, setting.value);\n        });\n      },\n      error: err => {\n        console.error('Error loading appearance settings', err);\n      }\n    });\n  }\n  applySetting(key, value) {\n    if (!value) return;\n    console.log(`Applying appearance setting: ${key} = ${value}`);\n    // Map database keys to CSS variables\n    const cssVarMap = {\n      'background-color': '--ion-background-color',\n      'text-color': '--ion-text-color',\n      'primary-color': '--ion-color-primary',\n      'font-family': '--app-font-family'\n    };\n    const cssVar = cssVarMap[key] || `--app-${key}`;\n    document.documentElement.style.setProperty(cssVar, value);\n    // Dynamic primary color variations\n    if (key === 'primary-color') {\n      const normalizedHex = value.startsWith('#') ? value : '#' + value;\n      const rgb = this.hexToRgb(normalizedHex);\n      if (rgb) {\n        document.documentElement.style.setProperty('--ion-color-primary-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);\n        // Basic shade/tint/light generation\n        document.documentElement.style.setProperty('--ion-color-primary-shade', this.adjustBrightness(normalizedHex, -20));\n        document.documentElement.style.setProperty('--ion-color-primary-tint', this.adjustBrightness(normalizedHex, 20));\n        document.documentElement.style.setProperty('--ion-color-primary-light', normalizedHex + '1a'); // 10% opacity\n      }\n    }\n    if (key === 'font-family') {\n      document.body.style.fontFamily = value;\n    }\n  }\n  adjustBrightness(hex, percent) {\n    let r = parseInt(hex.slice(1, 3), 16);\n    let g = parseInt(hex.slice(3, 5), 16);\n    let b = parseInt(hex.slice(5, 7), 16);\n    r = Math.min(255, Math.max(0, r + r * percent / 100));\n    g = Math.min(255, Math.max(0, g + g * percent / 100));\n    b = Math.min(255, Math.max(0, b + b * percent / 100));\n    const hr = Math.round(r).toString(16).padStart(2, '0');\n    const hg = Math.round(g).toString(16).padStart(2, '0');\n    const hb = Math.round(b).toString(16).padStart(2, '0');\n    return `#${hr}${hg}${hb}`;\n  }\n  hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  }\n  static #_ = _staticBlock = () => (this.ɵfac = function AppearanceService_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || AppearanceService)(i0.ɵɵinject(i1.ApiService), i0.ɵɵinject(i0.RendererFactory2));\n  }, this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AppearanceService,\n    factory: AppearanceService.ɵfac,\n    providedIn: 'root'\n  }));\n}\n_staticBlock();","map":{"version":3,"names":["AppearanceService","constructor","apiService","rendererFactory","renderer","createRenderer","applySettings","getNastavitve","subscribe","next","settings","forEach","setting","applySetting","key","value","error","err","console","log","cssVarMap","cssVar","document","documentElement","style","setProperty","normalizedHex","startsWith","rgb","hexToRgb","r","g","b","adjustBrightness","body","fontFamily","hex","percent","parseInt","slice","Math","min","max","hr","round","toString","padStart","hg","hb","result","exec","_","_staticBlock","i0","ɵɵinject","i1","ApiService","RendererFactory2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\TejWork\\Desktop\\Music\\Projekt\\Seznam-kolesarskih-poti-v-Sloveniji- - Copy\\ionic-frontend\\src\\app\\services\\appearance.service.ts"],"sourcesContent":["import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\nimport { ApiService } from './api.service';\r\nimport { Nastavitev } from '../models/models';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppearanceService {\r\n    private renderer: Renderer2;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        rendererFactory: RendererFactory2\r\n    ) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    applySettings() {\r\n        this.apiService.getNastavitve().subscribe({\r\n            next: (settings: Nastavitev[]) => {\r\n                settings.forEach(setting => {\r\n                    this.applySetting(setting.key, setting.value);\r\n                });\r\n            },\r\n            error: (err) => {\r\n                console.error('Error loading appearance settings', err);\r\n            }\r\n        });\r\n    }\r\n\r\n    private applySetting(key: string, value: string) {\r\n        if (!value) return;\r\n        console.log(`Applying appearance setting: ${key} = ${value}`);\r\n\r\n        // Map database keys to CSS variables\r\n        const cssVarMap: { [key: string]: string } = {\r\n            'background-color': '--ion-background-color',\r\n            'text-color': '--ion-text-color',\r\n            'primary-color': '--ion-color-primary',\r\n            'font-family': '--app-font-family'\r\n        };\r\n\r\n        const cssVar = cssVarMap[key] || `--app-${key}`;\r\n        document.documentElement.style.setProperty(cssVar, value);\r\n\r\n        // Dynamic primary color variations\r\n        if (key === 'primary-color') {\r\n            const normalizedHex = value.startsWith('#') ? value : '#' + value;\r\n            const rgb = this.hexToRgb(normalizedHex);\r\n            if (rgb) {\r\n                document.documentElement.style.setProperty('--ion-color-primary-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);\r\n\r\n                // Basic shade/tint/light generation\r\n                document.documentElement.style.setProperty('--ion-color-primary-shade', this.adjustBrightness(normalizedHex, -20));\r\n                document.documentElement.style.setProperty('--ion-color-primary-tint', this.adjustBrightness(normalizedHex, 20));\r\n                document.documentElement.style.setProperty('--ion-color-primary-light', normalizedHex + '1a'); // 10% opacity\r\n            }\r\n        }\r\n\r\n        if (key === 'font-family') {\r\n            document.body.style.fontFamily = value;\r\n        }\r\n    }\r\n\r\n    private adjustBrightness(hex: string, percent: number) {\r\n        let r = parseInt(hex.slice(1, 3), 16);\r\n        let g = parseInt(hex.slice(3, 5), 16);\r\n        let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n        r = Math.min(255, Math.max(0, r + (r * percent / 100)));\r\n        g = Math.min(255, Math.max(0, g + (g * percent / 100)));\r\n        b = Math.min(255, Math.max(0, b + (b * percent / 100)));\r\n\r\n        const hr = Math.round(r).toString(16).padStart(2, '0');\r\n        const hg = Math.round(g).toString(16).padStart(2, '0');\r\n        const hb = Math.round(b).toString(16).padStart(2, '0');\r\n\r\n        return `#${hr}${hg}${hb}`;\r\n    }\r\n\r\n    private hexToRgb(hex: string) {\r\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : null;\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}