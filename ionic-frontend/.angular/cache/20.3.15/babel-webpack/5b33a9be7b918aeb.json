{"ast":null,"code":"var _staticBlock;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nexport class AppearanceService {\n  constructor(apiService, rendererFactory) {\n    this.apiService = apiService;\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n  applySettings() {\n    this.apiService.getNastavitve().subscribe({\n      next: settings => {\n        settings.forEach(setting => {\n          this.applySetting(setting.key, setting.value);\n        });\n      },\n      error: err => {\n        console.error('Error loading appearance settings', err);\n      }\n    });\n  }\n  applySetting(key, value) {\n    if (!value) return;\n    // Map database keys to CSS variables\n    // Example: 'bg-color' -> '--app-bg-color'\n    const cssVarMap = {\n      'background-color': '--ion-background-color',\n      'text-color': '--ion-text-color',\n      'primary-color': '--ion-color-primary',\n      'font-family': '--app-font-family'\n    };\n    const cssVar = cssVarMap[key] || `--app-${key}`;\n    document.documentElement.style.setProperty(cssVar, value);\n    // If it's a primary color, we might need to update the RGB version for Ionic's opacity effects\n    if (key === 'primary-color') {\n      const rgb = this.hexToRgb(value);\n      if (rgb) {\n        document.documentElement.style.setProperty('--ion-color-primary-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);\n      }\n    }\n  }\n  hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  }\n  static #_ = _staticBlock = () => (this.ɵfac = function AppearanceService_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || AppearanceService)(i0.ɵɵinject(i1.ApiService), i0.ɵɵinject(i0.RendererFactory2));\n  }, this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AppearanceService,\n    factory: AppearanceService.ɵfac,\n    providedIn: 'root'\n  }));\n}\n_staticBlock();","map":{"version":3,"names":["AppearanceService","constructor","apiService","rendererFactory","renderer","createRenderer","applySettings","getNastavitve","subscribe","next","settings","forEach","setting","applySetting","key","value","error","err","console","cssVarMap","cssVar","document","documentElement","style","setProperty","rgb","hexToRgb","r","g","b","hex","result","exec","parseInt","_","_staticBlock","i0","ɵɵinject","i1","ApiService","RendererFactory2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\TejWork\\Desktop\\Music\\Projekt\\Seznam-kolesarskih-poti-v-Sloveniji- - Copy\\ionic-frontend\\src\\app\\services\\appearance.service.ts"],"sourcesContent":["import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\nimport { ApiService } from './api.service';\r\nimport { Nastavitev } from '../models/models';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppearanceService {\r\n    private renderer: Renderer2;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        rendererFactory: RendererFactory2\r\n    ) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    applySettings() {\r\n        this.apiService.getNastavitve().subscribe({\r\n            next: (settings: Nastavitev[]) => {\r\n                settings.forEach(setting => {\r\n                    this.applySetting(setting.key, setting.value);\r\n                });\r\n            },\r\n            error: (err) => {\r\n                console.error('Error loading appearance settings', err);\r\n            }\r\n        });\r\n    }\r\n\r\n    private applySetting(key: string, value: string) {\r\n        if (!value) return;\r\n\r\n        // Map database keys to CSS variables\r\n        // Example: 'bg-color' -> '--app-bg-color'\r\n        const cssVarMap: { [key: string]: string } = {\r\n            'background-color': '--ion-background-color',\r\n            'text-color': '--ion-text-color',\r\n            'primary-color': '--ion-color-primary',\r\n            'font-family': '--app-font-family'\r\n        };\r\n\r\n        const cssVar = cssVarMap[key] || `--app-${key}`;\r\n        document.documentElement.style.setProperty(cssVar, value);\r\n\r\n        // If it's a primary color, we might need to update the RGB version for Ionic's opacity effects\r\n        if (key === 'primary-color') {\r\n            const rgb = this.hexToRgb(value);\r\n            if (rgb) {\r\n                document.documentElement.style.setProperty('--ion-color-primary-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    private hexToRgb(hex: string) {\r\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : null;\r\n    }\r\n}\r\n"],"mappings":";;;AAOA,OAAM,MAAOA,iBAAiB;EAG1BC,YACYC,UAAsB,EAC9BC,eAAiC;IADzB,KAAAD,UAAU,GAAVA,UAAU;IAGlB,IAAI,CAACE,QAAQ,GAAGD,eAAe,CAACE,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC;EAC9D;EAEAC,aAAaA,CAAA;IACT,IAAI,CAACJ,UAAU,CAACK,aAAa,EAAE,CAACC,SAAS,CAAC;MACtCC,IAAI,EAAGC,QAAsB,IAAI;QAC7BA,QAAQ,CAACC,OAAO,CAACC,OAAO,IAAG;UACvB,IAAI,CAACC,YAAY,CAACD,OAAO,CAACE,GAAG,EAAEF,OAAO,CAACG,KAAK,CAAC;QACjD,CAAC,CAAC;MACN,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAI;QACXC,OAAO,CAACF,KAAK,CAAC,mCAAmC,EAAEC,GAAG,CAAC;MAC3D;KACH,CAAC;EACN;EAEQJ,YAAYA,CAACC,GAAW,EAAEC,KAAa;IAC3C,IAAI,CAACA,KAAK,EAAE;IAEZ;IACA;IACA,MAAMI,SAAS,GAA8B;MACzC,kBAAkB,EAAE,wBAAwB;MAC5C,YAAY,EAAE,kBAAkB;MAChC,eAAe,EAAE,qBAAqB;MACtC,aAAa,EAAE;KAClB;IAED,MAAMC,MAAM,GAAGD,SAAS,CAACL,GAAG,CAAC,IAAI,SAASA,GAAG,EAAE;IAC/CO,QAAQ,CAACC,eAAe,CAACC,KAAK,CAACC,WAAW,CAACJ,MAAM,EAAEL,KAAK,CAAC;IAEzD;IACA,IAAID,GAAG,KAAK,eAAe,EAAE;MACzB,MAAMW,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACX,KAAK,CAAC;MAChC,IAAIU,GAAG,EAAE;QACLJ,QAAQ,CAACC,eAAe,CAACC,KAAK,CAACC,WAAW,CAAC,yBAAyB,EAAE,GAAGC,GAAG,CAACE,CAAC,KAAKF,GAAG,CAACG,CAAC,KAAKH,GAAG,CAACI,CAAC,EAAE,CAAC;MACzG;IACJ;EACJ;EAEQH,QAAQA,CAACI,GAAW;IACxB,MAAMC,MAAM,GAAG,2CAA2C,CAACC,IAAI,CAACF,GAAG,CAAC;IACpE,OAAOC,MAAM,GAAG;MACZJ,CAAC,EAAEM,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC1BH,CAAC,EAAEK,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC1BF,CAAC,EAAEI,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;KAC5B,GAAG,IAAI;EACZ;EAAC,QAAAG,CAAA,GAAAC,YAAA,GAAAA,CAAA,M;qCAtDQnC,iBAAiB,EAAAoC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAD,EAAA,CAAAI,gBAAA;EAAA,G;WAAjBxC,iBAAiB;IAAAyC,OAAA,EAAjBzC,iBAAiB,CAAA0C,IAAA;IAAAC,UAAA,EAFd;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}